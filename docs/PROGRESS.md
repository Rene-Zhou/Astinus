# Astinus å¼€å‘è¿›åº¦ä¸è§„åˆ’

> æœ€åæ›´æ–°ï¼š2026-01-04

## ğŸ“‹ ç›®å½•
1. [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
2. [å½“å‰çŠ¶æ€](#å½“å‰çŠ¶æ€)
3. [å·²å®Œæˆçš„å·¥ä½œ](#å·²å®Œæˆçš„å·¥ä½œ)
4. [å¼€å‘é˜¶æ®µè§„åˆ’](#å¼€å‘é˜¶æ®µè§„åˆ’)
5. [è¿‘æœŸä¿®å¤](#è¿‘æœŸä¿®å¤)
6. [æŠ€æœ¯å€ºåŠ¡ä¸å¾…ä¼˜åŒ–é¡¹](#æŠ€æœ¯å€ºåŠ¡ä¸å¾…ä¼˜åŒ–é¡¹)
7. [ä¸‹ä¸€æ­¥è®¡åˆ’](#ä¸‹ä¸€æ­¥è®¡åˆ’)
8. [æäº¤å†å²æ‘˜è¦](#æäº¤å†å²æ‘˜è¦)
9. [å‚è€ƒæ–‡æ¡£](#å‚è€ƒæ–‡æ¡£)

---

## é¡¹ç›®æ¦‚è¿°

Astinus æ˜¯ä¸€ä¸ª AI é©±åŠ¨çš„å™äº‹å‘å•äºº TTRPG å¼•æ“ï¼Œé‡‡ç”¨å¤š Agent åä½œæ¶æ„ï¼Œé€šè¿‡è‡ªç„¶è¯­è¨€äº¤äº’é©±åŠ¨å‰§æƒ…ä¸è§„åˆ™è¿è¡Œã€‚

### æ ¸å¿ƒè®¾è®¡ç†å¿µ
- **çº¯è‡ªç„¶è¯­è¨€äº¤äº’**ï¼šç©å®¶é€šè¿‡è‡ªç”±æ–‡æœ¬æè¿°è¡ŒåŠ¨ï¼Œç³»ç»Ÿè´Ÿè´£è§£æä¸è£å†³ã€‚
- **å¤šæ™ºèƒ½ä½“åä½œ**ï¼šGM / NPC / Rule / Lore / Director ç­‰ Agent ååŒä¿éšœå™äº‹ä¸€è‡´æ€§ã€‚
- **è§„åˆ™é€æ˜å¯è¿½æº¯**ï¼šæ‰€æœ‰åˆ¤å®šæµç¨‹å‘ç©å®¶å…¬å¼€ï¼Œé¼“åŠ±ç­–ç•¥å™äº‹ã€‚
- **æ¨¡å—åŒ–å™äº‹èµ„äº§**ï¼šæ•…äº‹åŒ…ä¸å¼•æ“è§£è€¦ï¼Œæ”¯æŒå¤ç”¨ä¸æ‰©å±•ã€‚
- **å¤šè¯­è¨€ä¸€è‡´æ€§**ï¼šå‰ç«¯ç•Œé¢ã€ç³»ç»Ÿæç¤ºä¸ä¸–ç•ŒåŒ…å†…å®¹é¡»é€šè¿‡æœ¬åœ°åŒ–èµ„æºæä¾›è‡³å°‘ç®€ä½“ä¸­æ–‡ï¼ˆcnï¼‰ä¸è‹±æ–‡ï¼ˆenï¼‰ç‰ˆæœ¬ï¼Œç¦æ­¢ç¡¬ç¼–ç æ–‡æ¡ˆã€‚

### æŠ€æœ¯æ ˆ
| å±‚çº§ | ä¸»è¦æŠ€æœ¯ | çŠ¶æ€ |
|------|----------|------|
| TUI å‰ç«¯ | Textual | âœ… ç»„ä»¶å®Œæˆ / ğŸ”„ é›†æˆä¸­ |
| åç«¯ API | FastAPI + WebSocket | âœ… ç«¯ç‚¹å®šä¹‰ / ğŸ”„ è·¯ç”±å®ç°ä¸­ |
| AI Orchestrator | LangChain + å¤šæä¾›å•†æ¨¡å‹ | âœ… å·²å®Œæˆ |
| æ•°æ®å±‚ | SQLiteï¼ˆç»“æ„åŒ–ï¼‰+ ChromaDBï¼ˆå‘é‡æ£€ç´¢ï¼‰ | âœ… å‘é‡å®Œæˆ / â³ æŒä¹…åŒ–å¾…å®ç° |
| æ„å»º & ä¾èµ– | Python â‰¥3.13, uv | âœ… å·²ç¡®è®¤ |

---

## å½“å‰çŠ¶æ€

### é…ç½®æ–‡ä»¶ä½ç½®
| é…ç½®ç±»å‹ | çº¦å®šä½ç½® | è¯´æ˜ |
|----------|----------|------|
| é¡¹ç›®ä¾èµ– | `pyproject.toml`, `uv.lock` | åŸºç¡€ä¾èµ–å°šæœªç”³æ˜ |
| è¿è¡Œé…ç½® | `config/settings.yaml`ï¼ˆæ‹Ÿå®šï¼‰ | å°†åŒ…å«æ¨¡å‹/å¯†é’¥ç­‰æ•æ„Ÿä¿¡æ¯ï¼ˆä¸å…¥åº“ï¼‰ |
| æ–‡æ¡£è§„èŒƒ | `docs/*.md`, `CLAUDE.md` | å·²å»ºç«‹ç ”å‘è§„èŒƒ |

### é¡¹ç›®ç»“æ„
å½“å‰ä»“åº“ç»“æ„ä»å¤„äºåˆå§‹åŒ–é˜¶æ®µï¼Œä»…åŒ…å«æ ¸å¿ƒæ–‡æ¡£ä¸å ä½ä»£ç ã€‚ç›®æ ‡ç»“æ„å‚è§ `docs/ARCHITECTURE.md`ã€‚

---

## å·²å®Œæˆçš„å·¥ä½œ

### Phase 0: åŸºç¡€è§„åˆ’ âœ… å·²å®Œæˆ
- âœ… è¡¥å…… `GUIDE.md`ï¼šå®šä¹‰ä¸–ç•Œè§‚ã€Agent è§’è‰²ã€æ ¸å¿ƒç©æ³•ä¸è®¾è®¡åŸåˆ™ã€‚
- âœ… è¡¥å…… `ARCHITECTURE.md`ï¼šæ˜ç¡®å‰åç«¯åˆ†å±‚ã€ç›®å½•ç»“æ„ä¸é€šä¿¡åè®®ã€‚
- âœ… å»ºç«‹ç ”å‘è§„èŒƒ (`CLAUDE.md`)ï¼šç»Ÿä¸€ä¾èµ–ç®¡ç†ã€åˆ†æ”¯ç­–ç•¥ã€TDD è¦æ±‚ã€‚
- âœ… åˆå§‹åŒ–é¡¹ç›®éª¨æ¶ï¼šåˆ›å»º `pyproject.toml`ã€å…¥å£è„šæœ¬ `main.py`ã€‚

---

## å¼€å‘é˜¶æ®µè§„åˆ’

### Phase 1: åŸºç¡€è®¾æ–½æ­å»º âœ… å·²å®Œæˆ
| ä»»åŠ¡ | è´Ÿè´£äºº | çŠ¶æ€ |
|------|--------|------|
| 1.1 å»ºç«‹ `uv` ä¾èµ–æ¸…å•ä¸è™šæ‹Ÿç¯å¢ƒ | Backend Team | âœ… å·²å®Œæˆ |
| 1.2 åˆå§‹åŒ–ç›®å½•ç»“æ„ `src/backend`, `src/frontend` | Platform Team | âœ… å·²å®Œæˆ |
| 1.3 é…ç½®æ ¼å¼åŒ–ã€é™æ€æ£€æŸ¥ä¸ CI | DevOps | âœ… å·²å®Œæˆï¼ˆruff, mypy, pytest å·²é…ç½®ï¼‰ |
| 1.4 å¼•å…¥ pytest å¹¶åˆ›å»ºæ ·ä¾‹æµ‹è¯• | QA | âœ… å·²å®Œæˆ |
| 1.5 å»ºç«‹å¤šè¯­è¨€èµ„æºç›®å½•ä¸åŠ è½½æœåŠ¡ï¼ˆ`locale/`ã€i18n ç®¡çº¿ï¼‰ | Platform Team | âœ… å·²å®Œæˆï¼ˆI18nService + locale èµ„æºæ–‡ä»¶ + 21ä¸ªæµ‹è¯•ï¼‰ |

### Phase 2: åç«¯æ ¸å¿ƒå¼•æ“å‡†å¤‡ ğŸ”„ è¿›è¡Œä¸­

#### Week 1: Foundation Layer âœ… å·²å®Œæˆ
| ä»»åŠ¡ | çŠ¶æ€ | å¤‡æ³¨ |
|------|------|------|
| 2.1.1 Data Models | âœ… å·²å®Œæˆ | LocalizedString, Trait, Character, GameState + 53ä¸ªæµ‹è¯•, 99%è¦†ç›–ç‡ |
| 2.1.2 Dice System | âœ… å·²å®Œæˆ | DicePool, DiceResult, DiceCheckRequest + 47ä¸ªæµ‹è¯•, 95%è¦†ç›–ç‡ |
| 2.1.3 I18nService | âœ… å·²å®Œæˆ | I18nService + system/common åŒè¯­èµ„æº + 21ä¸ªæµ‹è¯•, 84%è¦†ç›–ç‡ |

**Week 1 æ€»è®¡**: 121ä¸ªæµ‹è¯•é€šè¿‡, 95%æ•´ä½“è¦†ç›–ç‡

#### Week 2: Agent Infrastructure âœ… å·²å®Œæˆ
| ä»»åŠ¡ | çŠ¶æ€ | å¤‡æ³¨ |
|------|------|------|
| 2.2.1 LangChain Agent Base | âœ… å·²å®Œæˆ | BaseAgent(Runnable) + LLM Provider Factory + 38ä¸ªæµ‹è¯•, 89%/74%è¦†ç›–ç‡ |
| 2.2.2 Prompt Template System | âœ… å·²å®Œæˆ | PromptLoader + YAML/Jinja2 + rule_agent/gm_agentæ¨¡æ¿ + 26ä¸ªæµ‹è¯•, 96%è¦†ç›–ç‡ |

**Week 2 æ€»è®¡**: 64ä¸ªæµ‹è¯•é€šè¿‡, æ–°å¢ä¾èµ–: langchain-openai, pyyaml, jinja2

#### Week 3: Core Agents âœ… å·²å®Œæˆ
| ä»»åŠ¡ | çŠ¶æ€ | å¤‡æ³¨ |
|------|------|------|
| 2.3.1 Rule Agent | âœ… å·²å®Œæˆ | è§„åˆ™è£åˆ¤Agent - åˆ¤å®šè¡ŒåŠ¨ã€ç”ŸæˆDiceCheckRequest + 12ä¸ªæµ‹è¯•, 92%è¦†ç›–ç‡ |
| 2.3.2 GM Agent | âœ… å·²å®Œæˆ | æ ¸å¿ƒåè°ƒè€… - æ˜Ÿå‹æ‹“æ‰‘ä¸­å¿ƒã€ä¸Šä¸‹æ–‡åˆ‡ç‰‡ + 14ä¸ªæµ‹è¯•, 98%è¦†ç›–ç‡ |
| Agent é›†æˆæµ‹è¯• | âœ… å·²å®Œæˆ | 7ä¸ªé›†æˆæµ‹è¯•éªŒè¯å¤šAgentåä½œå’Œæ˜Ÿå‹æ‹“æ‰‘ |

**Week 3 æ€»è®¡**: 33ä¸ªæµ‹è¯•é€šè¿‡, Agentè¦†ç›–ç‡: 92-98%

### Phase 3: Agent åä½œä¸ API é›†æˆ âœ… å·²å®Œæˆ

#### Week 1: Agent åä½œåŸºç¡€è®¾æ–½ âœ… å·²å®Œæˆ
| ä»»åŠ¡ | çŠ¶æ€ | å¤‡æ³¨ |
|------|------|------|
| 3.1 NPC Agent | âœ… å·²å®Œæˆ | åŸºäº NPCData(Soul+Body) ç”Ÿæˆè§’è‰²å¯¹è¯ + 16ä¸ªæµ‹è¯•, 89%è¦†ç›–ç‡ |
| 3.2 GM Agent å¢å¼º | âœ… å·²å®Œæˆ | æ”¯æŒ WorldPackLoader è·å– NPC æ•°æ®ã€å®Œæ•´ä¸Šä¸‹æ–‡åˆ‡ç‰‡ + 17ä¸ªæµ‹è¯•, 90%è¦†ç›–ç‡ |
| 3.3 Agent ç®¡çº¿é›†æˆ | âœ… å·²å®Œæˆ | GM â†’ Rule / NPC / Lore å®Œæ•´åä½œæµç¨‹ + 7ä¸ªé›†æˆæµ‹è¯• |
| 3.4 WebSocket æµå¼è¾“å‡º | âœ… å·²å®Œæˆ | ConnectionManagerã€åˆ†å—æµå¼ä¼ è¾“ã€çŠ¶æ€/å†…å®¹/å®Œæˆæ¶ˆæ¯åè®® + 14ä¸ªæµ‹è¯• |

**Week 1 æ€»è®¡**: 54ä¸ªæ–°æµ‹è¯•é€šè¿‡, æ€»æµ‹è¯•æ•°: 324ä¸ª, 84%è¦†ç›–ç‡

### Phase 4: å‘é‡æ£€ç´¢ä¸å¢å¼º JSON è§£æ âœ… å·²å®Œæˆ

#### Week 1: JSON Schema éªŒè¯ä¸å¢å¼ºé”™è¯¯æç¤º âœ… å·²å®Œæˆ
| ä»»åŠ¡ | çŠ¶æ€ | å¤‡æ³¨ |
|------|------|------|
| 4.1.1 JSON Schema å®šä¹‰ | âœ… å·²å®Œæˆ | åˆ›å»º `world_pack.json` Schema + åŠ è½½å·¥å…·ï¼Œ12ä¸ªéªŒè¯æµ‹è¯•ï¼Œ100%è¦†ç›–ç‡ |
| 4.1.2 å¢å¼º WorldPackLoader | âœ… å·²å®Œæˆ | Schema é¢„éªŒè¯ + é”™è¯¯æ ¼å¼åŒ–ï¼Œ8ä¸ªé”™è¯¯ä¿¡æ¯æµ‹è¯•ï¼Œ95%è¦†ç›–ç‡ |

**Week 1 æ€»è®¡**: 20ä¸ªæµ‹è¯•é€šè¿‡ï¼Œæ–°å¢ä¾èµ–: jsonschema

#### Week 2: å‘é‡å­˜å‚¨ & Lore æ··åˆæœç´¢ âœ… å·²å®Œæˆ
| ä»»åŠ¡ | çŠ¶æ€ | å¤‡æ³¨ |
|------|------|------|
| 4.2.1 VectorStoreService åŸºç¡€ | âœ… å·²å®Œæˆ | ChromaDB PersistentClient + å•ä¾‹æ¨¡å¼ï¼Œ20ä¸ªæµ‹è¯•ï¼Œ90%è¦†ç›–ç‡ |
| 4.2.2 Lore å‘é‡ç´¢å¼• | âœ… å·²å®Œæˆ | WorldPackLoader ç´¢å¼• lore entriesï¼Œä¸­è‹±æ–‡åˆ†åˆ«ç´¢å¼•ï¼Œ8ä¸ªæµ‹è¯•ï¼Œ85%è¦†ç›–ç‡ |
| 4.2.3 LoreAgent æ··åˆæœç´¢ | âœ… å·²å®Œæˆ | å…³é”®è¯+å‘é‡æ··åˆè¯„åˆ†ç®—æ³•ï¼Œ12ä¸ªæµ‹è¯•ï¼Œ85%è¦†ç›–ç‡ |

**Week 2 æ€»è®¡**: 40ä¸ªæµ‹è¯•é€šè¿‡ï¼Œæ–°å¢ä¾èµ–: chromadb

#### Week 3: NPC è®°å¿† & GM å†å²æ£€ç´¢ âœ… å·²å®Œæˆ
| ä»»åŠ¡ | çŠ¶æ€ | å¤‡æ³¨ |
|------|------|------|
| 4.2.4 NPC è®°å¿†æ£€ç´¢ | âœ… å·²å®Œæˆ | è¯­ä¹‰æ£€ç´¢ top 3 è®°å¿†ï¼Œ10ä¸ªæµ‹è¯•ï¼Œ85%è¦†ç›–ç‡ |
| 4.2.5 GM å¯¹è¯å†å²æ£€ç´¢ | âœ… å·²å®Œæˆ | é•¿æ¸¸æˆå†å²æ£€ç´¢ï¼ˆâ‰¥10æ¶ˆæ¯ï¼‰ï¼Œ8ä¸ªæµ‹è¯•ï¼Œ85%è¦†ç›–ç‡ |
| 4.2.6 é›†æˆæµ‹è¯• | âœ… å·²å®Œæˆ | 7ä¸ªç«¯åˆ°ç«¯åœºæ™¯æµ‹è¯•ï¼Œ400æ€»æµ‹è¯•ï¼Œ84%è¦†ç›–ç‡ |

**Week 3 æ€»è®¡**: 25ä¸ªæ–°æµ‹è¯•é€šè¿‡

#### Task 4.3: æ–‡æ¡£æ›´æ–° âœ… å·²å®Œæˆ
| ä»»åŠ¡ | çŠ¶æ€ | å¤‡æ³¨ |
|------|------|------|
| æ›´æ–° ARCHITECTURE.md | âœ… å·²å®Œæˆ | æ·»åŠ  3.3 èŠ‚"å‘é‡æ•°æ®åº“ (ChromaDB)" |
| æ›´æ–° PROGRESS.md | âœ… å·²å®Œæˆ | æ›´æ–° Phase 4 å®ŒæˆçŠ¶æ€ |

**Phase 4 æ€»è®¡**: 85ä¸ªæ–°æµ‹è¯•ï¼Œ400æ€»æµ‹è¯•ï¼Œ84%è¦†ç›–ç‡

### Phase 5: Textual TUI å‰ç«¯ âœ… ç»„ä»¶å®Œæˆ / ğŸ”„ é›†æˆè¿›è¡Œä¸­

> **çŠ¶æ€è¯´æ˜**: TUI ç»„ä»¶å·²å…¨éƒ¨å®ç°å¹¶é€šè¿‡æµ‹è¯•ï¼Œä½†å‰åç«¯é›†æˆå°šæœªå®Œæˆã€‚ç©å®¶è¾“å…¥æ— æ³•ä¼ é€’åˆ°åç«¯ Agentï¼Œéª°å­æ£€å®šæµç¨‹æœªæ‰“é€šã€‚

#### Phase 5.1: TUI åŸºç¡€æ¶æ„ âœ… å·²å®Œæˆ
| ä»»åŠ¡ | çŠ¶æ€ | å¤‡æ³¨ |
|------|------|------|
| 5.1.1 TUI åº”ç”¨å…¥å£ | âœ… å·²å®Œæˆ | AstinusApp ä¸»åº”ç”¨ç±»ï¼Œå±å¹•å¯¼èˆªï¼Œå“åº”å¼çŠ¶æ€ç®¡ç†ï¼Œé”®ç›˜å¿«æ·é”® |
| 5.1.2 HTTP/WebSocket å®¢æˆ·ç«¯ | âœ… å·²å®Œæˆ | GameClient ç±»ï¼ŒREST API + WebSocketï¼Œæ¶ˆæ¯å¤„ç†ï¼Œè¿æ¥ç®¡ç† |
| 5.1.3 åŸºç¡€ UI ç»„ä»¶ | âœ… å·²å®Œæˆ | ChatBox(èŠå¤©æ¡†)ï¼ŒStatBlock(çŠ¶æ€å—)ï¼ŒDiceRoller(éª°å­) |
| 5.1.4 æ¸¸æˆä¸»ç•Œé¢ | âœ… å·²å®Œæˆ | GameScreen æ•´åˆç»„ä»¶ï¼Œæ¶ˆæ¯æµå¤„ç†ï¼Œéª°å­æ£€æŸ¥è§¦å‘ |

**Phase 5.1 æ€»è®¡**: 4ä¸ªç»„ä»¶å®Œæˆï¼Œä¾èµ–: textual (å·²æœ‰)

#### Phase 5.2: æ¸¸æˆç•Œé¢ âœ… å·²å®Œæˆ
| ä»»åŠ¡ | çŠ¶æ€ | å¤‡æ³¨ |
|------|------|------|
| 5.2.1 è§’è‰²é¢æ¿ | âœ… å·²å®Œæˆ | CharacterScreen è¯¦ç»†è§’è‰²ä¿¡æ¯ï¼Œç‰¹æ€§æ˜¾ç¤ºï¼Œæ¸¸æˆçŠ¶æ€ |
| 5.2.2 æ·éª°äº¤äº’ç•Œé¢ | âœ… å·²å®Œæˆ | DiceRoller è™šæ‹Ÿéª°å­ï¼Œç»“æœæäº¤ï¼Œå¯è§†åŒ–åé¦ˆ |
| 5.2.3 èƒŒåŒ…ç•Œé¢ | âœ… å·²å®Œæˆ | InventoryScreen ç‰©å“åˆ—è¡¨ï¼Œæ•°é‡æ˜¾ç¤º |

**Phase 5.2 æ€»è®¡**: 3ä¸ªç•Œé¢å®Œæˆ

#### Phase 5.3: æµ‹è¯•ä¸è´¨é‡ âœ… å·²å®Œæˆ
| ä»»åŠ¡ | çŠ¶æ€ | å¤‡æ³¨ |
|------|------|------|
| 5.3.1 å‰ç«¯æµ‹è¯• | âœ… å·²å®Œæˆ | 25ä¸ªæµ‹è¯•ï¼Œ100%é€šè¿‡ï¼Œapp.py 72%è¦†ç›–ç‡ï¼Œclient.py 47%è¦†ç›–ç‡ |
| 5.3.2 é›†æˆæµ‹è¯• | âœ… å·²å®Œæˆ | å‰ç«¯ä¸åç«¯é€šä¿¡æµ‹è¯•ï¼ŒWebSocket æ¶ˆæ¯æµ‹è¯• |

**Phase 5.3 æ€»è®¡**: 25ä¸ªæ–°æµ‹è¯•

#### Phase 5.4: Bug ä¿®å¤ âœ… å·²å®Œæˆ
| é—®é¢˜ | çŠ¶æ€ | ä¿®å¤å†…å®¹ |
|------|------|---------|
| Screen.app åªè¯»å±æ€§ | âœ… å·²ä¿®å¤ | ç§»é™¤ Screen å­ç±»ä¸­çš„ self.app èµ‹å€¼ |
| CSS æ— æ•ˆå˜é‡ | âœ… å·²ä¿®å¤ | `$text-muted` â†’ `$text-disabled`, `$panel-darken` â†’ `$surface`, `$info` â†’ `$accent` |
| CSS æ— æ•ˆå±æ€§ | âœ… å·²ä¿®å¤ | ç§»é™¤ `font-size` å±æ€§ |
| asyncio å¯¼å…¥ç¼ºå¤± | âœ… å·²ä¿®å¤ | client.py æ·»åŠ  `import asyncio` |
| å±å¹•å¯¼èˆªé”™è¯¯ | âœ… å·²ä¿®å¤ | åˆå§‹å±å¹•ç”¨ `push_screen`ï¼Œåç»­å¯¼èˆªç”¨ `switch_screen` |
| Reactive åˆ—è¡¨å…±äº« | âœ… å·²ä¿®å¤ | `reactive([])` â†’ `reactive(list)` |

**Phase 5 æ€»è®¡**: 25ä¸ªæ–°æµ‹è¯•ï¼Œ425æ€»æµ‹è¯•

---

### Phase 6: å®Œæ•´æ¸¸æˆä½“éªŒä¸éƒ¨ç½² ğŸ”„ è¿›è¡Œä¸­

> **ç›®æ ‡**: æ‰“é€šå‰åç«¯é›†æˆï¼Œå®ç°å®Œæ•´å¯ç©çš„æ¸¸æˆä½“éªŒ

#### Phase 6.1: å‰åç«¯é›†æˆ (Critical Path) âœ… å·²å®Œæˆ
| ä»»åŠ¡ | ä¼˜å…ˆçº§ | çŠ¶æ€ | æ–‡ä»¶ |
|------|--------|------|------|
| 6.1.1 WebSocket æ¶ˆæ¯å¤„ç† | ğŸ”´ Critical | âœ… å®Œæˆ | `src/backend/api/websockets.py` |
| 6.1.2 GameClient è¿æ¥ç®¡ç† | ğŸ”´ Critical | âœ… å®Œæˆ | `src/frontend/client.py` |
| 6.1.3 æ¸¸æˆçŠ¶æ€åŒæ­¥ | ğŸ”´ Critical | âœ… å®Œæˆ | `src/frontend/screens/*.py` |
| 6.1.4 éª°å­æ£€å®šæµç¨‹ | ğŸ”´ Critical | âœ… å®Œæˆ | `widgets/dice_roller.py`, `agents/rule.py` |

**è¯´æ˜**:
- âœ… WebSocket æ¶ˆæ¯è·¯ç”±: `player_input` â†’ GM Agent â†’ å“åº”æµ
- âœ… DICE_CHECK/DICE_RESULT æ¶ˆæ¯ç±»å‹æ”¯æŒ
- âœ… GameClient å¼‚æ­¥è¿æ¥ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œæ–­çº¿é‡è¿
- âœ… ConnectionState çŠ¶æ€æšä¸¾ä¸è‡ªåŠ¨é‡è¿æœºåˆ¶
- âœ… DiceRoller ç»„ä»¶å¢å¼º: 2d6 ç³»ç»Ÿ/ä¼˜åŠ¿åŠ£åŠ¿æ”¯æŒ
- âœ… GameScreen éª°å­æ£€å®šæµç¨‹é›†æˆ

**å®Œæˆå·¥ä½œé‡**: ~1200 è¡Œä»£ç ï¼Œ73 ä¸ªæ–°æµ‹è¯•

#### Phase 6.2: æŒä¹…åŒ–å±‚ âœ… å·²å®Œæˆ
| ä»»åŠ¡ | ä¼˜å…ˆçº§ | çŠ¶æ€ | æ–‡ä»¶ |
|------|--------|------|------|
| 6.2.1 æ•°æ®åº“æœåŠ¡ | ğŸ”´ Critical | âœ… å®Œæˆ | `src/backend/services/database.py` |
| 6.2.2 ä¼šè¯ç®¡ç† | ğŸ”´ Critical | âœ… å®Œæˆ | `src/backend/services/database.py` |
| 6.2.3 æŒä¹…åŒ–æ¨¡å‹ | ğŸ”´ Critical | âœ… å®Œæˆ | `src/backend/models/persistence.py` |
| 6.2.4 å­˜æ¡£ API | ğŸŸ¡ High | âœ… å®Œæˆ | `src/backend/services/database.py` |
| 6.2.5 è‡ªåŠ¨å­˜æ¡£ | ğŸŸ¡ High | âœ… å®Œæˆ | `src/backend/services/database.py` |

**è¯´æ˜**:
- âœ… SQLite å¼‚æ­¥è¿æ¥ç®¡ç† (aiosqlite)
- âœ… SQLAlchemy ORM æŒä¹…åŒ–æ¨¡å‹ (GameSessionModel, MessageModel, SaveSlotModel)
- âœ… æ¸¸æˆä¼šè¯ CRUD æ“ä½œ
- âœ… å­˜æ¡£/è¯»æ¡£åŠŸèƒ½
- âœ… è‡ªåŠ¨å­˜æ¡£ä¸è½®æ¢æœºåˆ¶

**å®Œæˆå·¥ä½œé‡**: ~600 è¡Œä»£ç ï¼Œ24 ä¸ªæ–°æµ‹è¯•

#### Phase 6.3: UI å®Œå–„ âœ… å·²å®Œæˆ
| ä»»åŠ¡ | ä¼˜å…ˆçº§ | çŠ¶æ€ | æ–‡ä»¶ |
|------|--------|------|------|
| 6.3.1 å¼€å§‹èœå• | ğŸŸ¡ High | âœ… å·²å®Œæˆ | `src/frontend/screens/menu_screen.py` |
| 6.3.2 è§’è‰²åˆ›å»º | ğŸŸ¡ High | âœ… å·²å®Œæˆ | `src/frontend/screens/character_creation.py` |
| 6.3.3 çŠ¶æ€æ˜¾ç¤ºå¢å¼º | ğŸŸ¡ High | âœ… å·²å®Œæˆ | `src/frontend/widgets/stat_block.py` |
| 6.3.4 é”™è¯¯å¤„ç† UI | ğŸŸ¢ Medium | â³ å¾…å¼€å§‹ | å„ screen/widget |

**è¯´æ˜**:
- âœ… æ–°æ¸¸æˆ/è¯»æ¡£/è®¾ç½®èœå• (MenuScreen)
- âœ… è§’è‰²ç‰¹æ€§é€‰æ‹©æµç¨‹ (CharacterCreationScreen with PbtA-style attributes)
- âœ… ä½ç½®ã€NPCã€æ•ˆæœæ˜¾ç¤ºå¢å¼º (StatBlock with HP/MP bars, effects, NPCs)
- â³ é”™è¯¯æç¤ºã€åŠ è½½æŒ‡ç¤ºå™¨

**å·²å®ŒæˆåŠŸèƒ½**:
- MenuScreen: æ–°æ¸¸æˆã€è¯»æ¡£ã€è®¾ç½®ã€é€€å‡ºæŒ‰é’®ï¼Œé”®ç›˜å¿«æ·é”®
- CharacterCreationScreen: å§“åè¾“å…¥ã€å±æ€§ç‚¹åˆ†é… (7ç‚¹, -2 åˆ° +3)ã€èŒä¸šé€‰æ‹©ã€éªŒè¯
- StatBlock å¢å¼º: å±æ€§æ˜¾ç¤ºã€HP/MP è¿›åº¦æ¡ã€æ•ˆæœåˆ—è¡¨ã€é™„è¿‘ NPC æ˜¾ç¤º
- æµ‹è¯•è¦†ç›–: 77 ä¸ªæ–°æµ‹è¯•é€šè¿‡

**å®é™…å·¥ä½œé‡**: ~900 è¡Œä»£ç 

#### Phase 6.4: Agent åä½œå®Œå–„ ğŸ”„ è¿›è¡Œä¸­
| ä»»åŠ¡ | ä¼˜å…ˆçº§ | çŠ¶æ€ | æ–‡ä»¶ |
|------|--------|------|------|
| 6.4.1 GM Agent è·¯ç”± | ğŸŸ¡ High | âœ… å·²å®Œæˆ | `src/backend/agents/gm.py` |
| 6.4.2 NPC çŠ¶æ€æ›´æ–° | ğŸŸ¡ High | â³ å¾…å¼€å§‹ | `src/backend/agents/npc.py` |
| 6.4.3 Rule Agent ç»“æœå¤„ç† | ğŸŸ¡ High | â³ å¾…å¼€å§‹ | `src/backend/agents/rule.py` |
| 6.4.4 Director Agent | ğŸŸ¢ Medium | âœ… å·²å®Œæˆ | `src/backend/agents/director.py` |

**è¯´æ˜**:
- âœ… GM Agent æ„å›¾è§£æå’Œ Agent åˆ†å‘å·²å®ç°
- â³ NPC è®°å¿†å’Œå…³ç³»å€¼æŒä¹…åŒ–
- â³ æ£€å®šç»“æœå™äº‹ç”Ÿæˆ
- âœ… æ¸¸æˆèŠ‚å¥ç®¡ç† (Director Agent)

**å·²å®ŒæˆåŠŸèƒ½**:
- DirectorAgent: å™äº‹èŠ‚æ‹ç®¡ç† (hook, setup, rising_action, climax, etc.)
- å¼ åŠ›ç­‰çº§è¿½è¸ª (1-10 scale)
- èŠ‚å¥å»ºè®® (speed_up, slow_down, build_tension, etc.)
- åŠ¨ä½œ/å¯¹è¯æ¯”ä¾‹å¹³è¡¡
- å¯å‘å¼å›é€€åˆ†æ

**å®é™…å·¥ä½œé‡**: ~500 è¡Œä»£ç ï¼Œ34 ä¸ªæ–°æµ‹è¯•

#### Phase 6.5: æµ‹è¯•ä¸éƒ¨ç½² â³ å¾…å¼€å§‹
| ä»»åŠ¡ | ä¼˜å…ˆçº§ | çŠ¶æ€ | æ–‡ä»¶ |
|------|--------|------|------|
| 6.5.1 é›†æˆæµ‹è¯• | ğŸŸ¡ High | â³ å¾…å¼€å§‹ | `tests/integration/` (æ–°) |
| 6.5.2 è¦†ç›–ç‡æå‡ | ğŸŸ¡ High | â³ å¾…å¼€å§‹ | `tests/` |
| 6.5.3 CI/CD é…ç½® | ğŸŸ¢ Medium | â³ å¾…å¼€å§‹ | `.github/workflows/` |
| 6.5.4 éƒ¨ç½²æ–‡æ¡£ | ğŸŸ¢ Medium | â³ å¾…å¼€å§‹ | `docs/DEPLOYMENT.md` (æ–°) |

**è¯´æ˜**:
- ç«¯åˆ°ç«¯æ¸¸æˆæµç¨‹æµ‹è¯•
- è¦†ç›–ç‡ç›®æ ‡ 70%+
- GitHub Actions é…ç½®
- Dockerã€ç¯å¢ƒå˜é‡æ–‡æ¡£

#### é‡è¦è¯´æ˜ï¼šå‰§æƒ…èŠ‚ç‚¹å›¾æ¨è¿Ÿ
**Task 4.3 å‰§æƒ…èŠ‚ç‚¹å›¾**åœ¨ Demo é˜¶æ®µæç½®ï¼Œä¸“æ³¨äºå•åœºæ™¯å®ç°ã€‚

**åŸå› **:
- Demo é˜¶æ®µç›®æ ‡ï¼šéªŒè¯æ ¸å¿ƒæœºåˆ¶ï¼ˆAgent åä½œã€å‘é‡æ£€ç´¢ã€ä¸–ç•ŒåŒ…åŠ è½½ï¼‰
- å¤šåœºæ™¯è½¬æ¢éœ€è¦å¤æ‚çš„çŠ¶æ€ç®¡ç†å’Œè¿‡æ¸¡é€»è¾‘
- å½“å‰é‡ç‚¹ï¼šå®Œå–„å•åœºæ™¯å†…çš„å™äº‹ä½“éªŒå’Œæ£€ç´¢ç²¾åº¦

**åç»­è®¡åˆ’**:
- åœ¨å®Œæˆ Phase 6 åå†å®ç°å¤šåœºæ™¯ç®¡ç†
- å±Šæ—¶å°†åŸºäºå®é™…ä½¿ç”¨åé¦ˆè®¾è®¡åœºæ™¯è½¬æ¢æœºåˆ¶

---

## æœ€è¿‘ä¿®å¤
| æ—¥æœŸ | é¡¹ç›® | åˆ†æ”¯ / ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|-------------|------|
| 2026-01-04 | TUI Bug ä¿®å¤ | `fix/screen-app-property-readonly` | ä¿®å¤ TUI å¯åŠ¨é”™è¯¯ï¼šScreen.app åªè¯»å±æ€§ã€CSS æ— æ•ˆå˜é‡/å±æ€§ã€asyncio å¯¼å…¥ã€å±å¹•å¯¼èˆªã€Reactive åˆ—è¡¨å…±äº«é—®é¢˜ |
| 2026-01-04 | Phase 5 å®Œæˆ | `feature/phase5-textual-tui-frontend` | å®Œæˆ Textual TUI å‰ç«¯å®ç°ï¼šAstinusAppã€GameClientã€UIç»„ä»¶ã€æ¸¸æˆç•Œé¢ã€‚25ä¸ªæ–°æµ‹è¯•ï¼Œ425æ€»æµ‹è¯•ï¼Œ72%è¦†ç›–ç‡ |
| 2026-01-04 | Phase 4 å®Œæˆ | `feature/phase4-week1-json-schema-validation` | å®Œæˆå‘é‡æ£€ç´¢ä¸å¢å¼º JSON è§£æï¼šVectorStoreServiceã€LoreAgentæ··åˆæœç´¢ã€NPCè®°å¿†æ£€ç´¢ã€GMå†å²æ£€ç´¢ã€‚85ä¸ªæ–°æµ‹è¯•ï¼Œ400æ€»æµ‹è¯•ï¼Œ84%è¦†ç›–ç‡ |
| 2026-01-03 | Phase 3 å®Œæˆ | `feature/phase3-agent-collaboration` | å®Œæˆ Agent åä½œä¸ API é›†æˆï¼šNPC Agentã€GM å¢å¼ºã€Agent ç®¡çº¿ã€WebSocket æµå¼ã€‚54ä¸ªæ–°æµ‹è¯•ï¼Œ324æ€»æµ‹è¯•ï¼Œ84%è¦†ç›–ç‡ |
| 2026-01-03 | Phase 2 Week 3 å®Œæˆ | `feature/week3-core-agents` | å®Œæˆ Core Agentsï¼šRuleAgent + GMAgent + é›†æˆæµ‹è¯•ã€‚33ä¸ªæµ‹è¯•ï¼Œ92-98%è¦†ç›–ç‡ |
| 2026-01-03 | Phase 2 Week 2 å®Œæˆ | `master` | å®Œæˆ Agent Infrastructureï¼šBaseAgentã€LLM Providerã€PromptLoaderã€‚64ä¸ªæµ‹è¯•ï¼Œ89-96%è¦†ç›–ç‡ |
| 2026-01-03 | Phase 2 Week 1 å®Œæˆ | `master` | å®Œæˆ Foundation Layerï¼šæ•°æ®æ¨¡å‹ã€éª°å­ç³»ç»Ÿã€I18nServiceã€‚121ä¸ªæµ‹è¯•ï¼Œ95%è¦†ç›–ç‡ |
| 2026-01-03 | Phase 1 åŸºç¡€è®¾æ–½æ­å»º | `master` | å®Œæˆé¡¹ç›®ç›®å½•ç»“æ„åˆå§‹åŒ–ã€ä¾èµ–é…ç½®ã€å¼€å‘å·¥å…·è®¾ç½® |

---

## æŠ€æœ¯å€ºåŠ¡ä¸å¾…ä¼˜åŒ–é¡¹

### é«˜ä¼˜å…ˆçº§ï¼ˆé˜»å¡å¯ç©æ€§ï¼‰
- ğŸ”´ **å‰åç«¯é›†æˆæœªå®Œæˆ** - WebSocket æ¶ˆæ¯è·¯ç”±æœªå®ç°ï¼Œç©å®¶è¾“å…¥æ— æ³•ä¼ é€’åˆ°åç«¯
- ğŸ”´ **æŒä¹…åŒ–å±‚ç¼ºå¤±** - æ— å­˜æ¡£/è¯»æ¡£åŠŸèƒ½ï¼Œæ¸¸æˆè¿›åº¦æ— æ³•ä¿å­˜
- ğŸ”´ **éª°å­æ£€å®šæµç¨‹æ–­è£‚** - Rule Agent æ— æ³•è§¦å‘å‰ç«¯éª°å­ç•Œé¢
- ğŸŸ¡ **æµ‹è¯•è¦†ç›–ç‡ä¸è¶³** - å…³é”®è·¯å¾„è¦†ç›–ç‡è¾ƒä½ï¼ˆwebsockets 32%, gm.py 15%ï¼‰

### ä¸­ä¼˜å…ˆçº§
- Story Pack æ ¼å¼ä¸è¿ç§»è„šæœ¬æœªè½åœ°
- é…ç½®ä¸å¯†é’¥ç®¡ç†ç­–ç•¥éœ€æ–‡æ¡£ï¼ˆåŒºåˆ†æœ¬åœ°/ç”Ÿäº§ï¼‰
- ~~ç¼ºå¤±å•å…ƒæµ‹è¯•ä¸ CI æµæ°´çº¿~~ ğŸ”„ å•å…ƒæµ‹è¯•å·²æ­å»ºï¼ŒCI å¾…é…ç½®
- å‰ç«¯ç¡¬ç¼–ç æ–‡æ¡ˆéœ€æå–åˆ° locale æ–‡ä»¶

### ä½ä¼˜å…ˆçº§
- æ–‡æ¡£å›½é™…åŒ–è§„åˆ’ï¼ˆä¸­è‹±åŒè¯­ï¼‰æœ‰å¾…è¯„ä¼°
- å¼€å‘è€…ä½“éªŒæå‡ï¼ˆé¢„æ„å»º Makefile / uv è„šæœ¬ï¼‰å¾…æ‰§è¡Œ
- Director Agent æœªå®ç°ï¼ˆæ¸¸æˆèŠ‚å¥ç®¡ç†ï¼‰

### å·²è§£å†³
- ~~`pyproject.toml` ç¼ºå°‘æ ¸å¿ƒä¾èµ–~~ âœ… å·²å®Œæˆ
- ~~å»ºç«‹ i18n åŠ è½½æœåŠ¡~~ âœ… å·²å®Œæˆï¼ˆI18nService + locale èµ„æºï¼‰
- ~~å°šæœªåˆ›å»º `src` ç›®å½•ä¸æ¨¡å—åŒ–ç»“æ„~~ âœ… å·²å®Œæˆ
- ~~Prompt ç®¡ç†æ–¹æ¡ˆ~~ âœ… å·²å®Œæˆï¼ˆPromptLoader + YAML/Jinja2ï¼‰
- ~~TUI CSS å’Œå¯¼èˆªé—®é¢˜~~ âœ… å·²ä¿®å¤ï¼ˆfix/screen-app-property-readonlyï¼‰

---

## ä¸‹ä¸€æ­¥è®¡åˆ’

### ç«‹å³æ‰§è¡Œï¼ˆPhase 6.3-6.4ï¼‰
1. ~~**WebSocket æ¶ˆæ¯è·¯ç”±** - å®Œæˆ `player_input` â†’ GM Agent â†’ å“åº”æµ~~ âœ…
2. ~~**GameClient è¿æ¥ç®¡ç†** - å®ç°å¼‚æ­¥è¿æ¥ç”Ÿå‘½å‘¨æœŸã€æ–­çº¿é‡è¿~~ âœ…
3. ~~**æ•°æ®åº“æœåŠ¡** - SQLite è¿æ¥ç®¡ç†ä¸ SQLAlchemy æ¨¡å‹~~ âœ…
4. ~~**ä¼šè¯ç®¡ç†** - æ¸¸æˆä¼šè¯ CRUD ä¸å­˜æ¡£ API~~ âœ…
5. **å¼€å§‹èœå•** - æ–°æ¸¸æˆ/è¯»æ¡£/è®¾ç½®èœå•ç•Œé¢
6. **å­˜æ¡£ REST API** - é›†æˆ DatabaseService åˆ° game.py ç«¯ç‚¹

### çŸ­æœŸç›®æ ‡ï¼ˆPhase 6.3-6.4ï¼‰
- å®ç°å¼€å§‹èœå•ï¼ˆæ–°æ¸¸æˆ/è¯»æ¡£/è®¾ç½®ï¼‰
- å®Œæˆéª°å­æ£€å®šå®Œæ•´æµç¨‹ï¼ˆRule Agent â†” DiceRollerï¼‰
- GM Agent æ„å›¾è§£æä¸ Agent åˆ†å‘
- NPC çŠ¶æ€æ›´æ–°ä¸è®°å¿†æŒä¹…åŒ–

### ä¸­æœŸç›®æ ‡ï¼ˆPhase 6.5ï¼‰
- ç«¯åˆ°ç«¯é›†æˆæµ‹è¯•ï¼Œè¦†ç›–ç‡ç›®æ ‡ 70%+
- é…ç½® GitHub Actions CI æµæ°´çº¿
- ç¼–å†™éƒ¨ç½²æ–‡æ¡£ï¼ˆDockerã€ç¯å¢ƒå˜é‡ï¼‰
- æ‰“ç£¨ UXã€é”™è¯¯å¤„ç†ä¸åŠ è½½æŒ‡ç¤ºå™¨

### å¼€å‘é¡ºåºå»ºè®®
```
Week 1-2: Critical Path (6.1 + 6.2.1-6.2.3)
â”œâ”€â”€ WebSocket æ¶ˆæ¯è·¯ç”±
â”œâ”€â”€ GameClient è¿æ¥ç®¡ç†
â”œâ”€â”€ æ•°æ®åº“æœåŠ¡
â””â”€â”€ ä¼šè¯ç®¡ç†

Week 3: æ¸¸æˆæµç¨‹ (6.1.4 + 6.4.1-6.4.3)
â”œâ”€â”€ éª°å­æ£€å®šæµç¨‹
â”œâ”€â”€ GM Agent è·¯ç”±
â””â”€â”€ Rule Agent ç»“æœ

Week 4: UI ä¸æµ‹è¯• (6.3 + 6.5)
â”œâ”€â”€ å¼€å§‹èœå•
â”œâ”€â”€ é›†æˆæµ‹è¯•
â””â”€â”€ éƒ¨ç½²æ–‡æ¡£
```

---

## æäº¤å†å²æ‘˜è¦
| æ—¥æœŸ | æäº¤ | é‡ç‚¹ |
|------|------|------|
| 2026-01-05 | `feature/phase6-frontend-backend-integration` | Phase 6.2 å®Œæˆï¼šæŒä¹…åŒ–å±‚ã€æ•°æ®åº“æœåŠ¡ã€ä¼šè¯ç®¡ç†ï¼Œ24 ä¸ªæ–°æµ‹è¯•ï¼Œ522 æ€»æµ‹è¯• |
| 2026-01-05 | `feature/phase6-frontend-backend-integration` | Phase 6.1 å®Œæˆï¼šWebSocket æ¶ˆæ¯è·¯ç”±ã€GameClient è¿æ¥ç®¡ç†ã€éª°å­æ£€å®šæµç¨‹ï¼Œ73 ä¸ªæ–°æµ‹è¯•ï¼Œ498 æ€»æµ‹è¯• |
| 2026-01-04 | `fix/screen-app-property-readonly` | TUI Bug ä¿®å¤ï¼šCSSã€å±å¹•å¯¼èˆªã€asyncio å¯¼å…¥ç­‰ |
| 2026-01-04 | `feature/phase5-textual-tui-frontend` | å®Œæˆ Phase 5ï¼šTextual TUI å‰ç«¯å®ç°ï¼Œ25ä¸ªæµ‹è¯•ï¼Œ425æ€»æµ‹è¯• |
| 2026-01-04 | `feature/phase4-week1-json-schema-validation` | å®Œæˆ Phase 4ï¼šå‘é‡æ£€ç´¢ä¸å¢å¼º JSON è§£æï¼Œ85ä¸ªæµ‹è¯•ï¼Œ400æ€»æµ‹è¯• |
| 2026-01-03 | `feature/phase3-agent-collaboration` | å®Œæˆ Phase 3ï¼šAgent åä½œä¸ API é›†æˆï¼Œ54ä¸ªæµ‹è¯•ï¼Œ324æ€»æµ‹è¯• |
| 2026-01-03 | `feature/week3-core-agents` | å®Œæˆ Phase 2 Week 3ï¼šCore Agentsï¼Œ33ä¸ªæµ‹è¯• |
| 2026-01-03 | `master` | å®Œæˆ Phase 2 Week 2ï¼šAgent Infrastructureï¼Œ64ä¸ªæµ‹è¯• |
| 2026-01-03 | `master` | å®Œæˆ Phase 2 Week 1ï¼šFoundation Layerï¼Œ121ä¸ªæµ‹è¯• |
| 2026-01-03 | `master` | å®Œæˆ Phase 1ï¼šåŸºç¡€è®¾æ–½æ­å»º |

> æ³¨ï¼šè¯¦ç»†æäº¤è®°å½•å¯é€šè¿‡ `git log --oneline` æŸ¥çœ‹ã€‚
> å½“å‰æ´»è·ƒåˆ†æ”¯: `feature/phase5-textual-tui-frontend` (åŒ…å« TUI bug ä¿®å¤)

---

## å‚è€ƒæ–‡æ¡£
- `docs/GUIDE.md`
- `docs/ARCHITECTURE.md`
- `CLAUDE.md`

---
